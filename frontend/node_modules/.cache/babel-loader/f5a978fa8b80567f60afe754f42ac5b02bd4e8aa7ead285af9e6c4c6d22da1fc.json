{"ast":null,"code":"import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents';\n\n//购物车reducer\nexport const cartReducer = (state = {\n  cartItems: []\n}, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM:\n      {\n        const item = action.payload;\n        const existItem = state.cartItems.find(x => x.product === item.product);\n        if (existItem) {\n          // 如果是从产品页面添加，则累加数量；否则，设置为特定的数量\n          const updatedQty = fromProductPage ? existItem.qty + item.qty : item.qty;\n          return {\n            ...state,\n            cartItems: state.cartItems.map(x => x.product === existItem.product ? {\n              ...x,\n              qty: updatedQty\n            } : x)\n          };\n        } else {\n          // 如果商品不存在于购物车中，则添加新商品\n          return {\n            ...state,\n            cartItems: [...state.cartItems, item]\n          };\n        }\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["CART_ADD_ITEM","CART_REMOVE_ITEM","cartReducer","state","cartItems","action","type","item","payload","existItem","find","x","product","updatedQty","fromProductPage","qty","map"],"sources":["/Users/risun/Desktop/podian/frontend/src/reducers/cartReducers.js"],"sourcesContent":["import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents'\n\n//购物车reducer\nexport const cartReducer = (state = { cartItems: [] }, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM: {\n      const item = action.payload;\n      const existItem = state.cartItems.find(x => x.product === item.product);\n    \n      if (existItem) {\n        // 如果是从产品页面添加，则累加数量；否则，设置为特定的数量\n        const updatedQty = fromProductPage ? existItem.qty + item.qty : item.qty;\n        return {\n          ...state,\n          cartItems: state.cartItems.map(x =>\n            x.product === existItem.product ? { ...x, qty: updatedQty } : x\n          ),\n        };\n      } else {\n        // 如果商品不存在于购物车中，则添加新商品\n        return {\n          ...state,\n          cartItems: [...state.cartItems, item],\n        };\n      }\n    }\n    \n      \n    default:\n      return state\n  }\n}"],"mappings":"AAAA,SAASA,aAAa,EAAEC,gBAAgB,QAAQ,2BAA2B;;AAE3E;AACA,OAAO,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAG;EAAEC,SAAS,EAAE;AAAG,CAAC,EAAEC,MAAM,KAAK;EAChE,QAAQA,MAAM,CAACC,IAAI;IACjB;IACA,KAAKN,aAAa;MAAE;QAClB,MAAMO,IAAI,GAAGF,MAAM,CAACG,OAAO;QAC3B,MAAMC,SAAS,GAAGN,KAAK,CAACC,SAAS,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAKL,IAAI,CAACK,OAAO,CAAC;QAEvE,IAAIH,SAAS,EAAE;UACb;UACA,MAAMI,UAAU,GAAGC,eAAe,GAAGL,SAAS,CAACM,GAAG,GAAGR,IAAI,CAACQ,GAAG,GAAGR,IAAI,CAACQ,GAAG;UACxE,OAAO;YACL,GAAGZ,KAAK;YACRC,SAAS,EAAED,KAAK,CAACC,SAAS,CAACY,GAAG,CAACL,CAAC,IAC9BA,CAAC,CAACC,OAAO,KAAKH,SAAS,CAACG,OAAO,GAAG;cAAE,GAAGD,CAAC;cAAEI,GAAG,EAAEF;YAAW,CAAC,GAAGF,CAChE;UACF,CAAC;QACH,CAAC,MAAM;UACL;UACA,OAAO;YACL,GAAGR,KAAK;YACRC,SAAS,EAAE,CAAC,GAAGD,KAAK,CAACC,SAAS,EAAEG,IAAI;UACtC,CAAC;QACH;MACF;IAGA;MACE,OAAOJ,KAAK;EAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}