{"ast":null,"code":"import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents';\n\n//购物车reducer\nexport const cartReducer = (state = {\n  cartItems: []\n}, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM:\n      {\n        const {\n          item,\n          product,\n          name,\n          image,\n          price,\n          statetock,\n          qty,\n          fromProductPage\n        } = action.payload;\n        const existItem = state.cartItems.find(x => x.product === item.product);\n        if (existItem) {\n          // 如果是从产品页面添加，则累加数量；否则，设置为特定的数量\n          const updatedQty = fromProductPage ? existItem.qty + item.qty : item.qty;\n          return {\n            ...state,\n            cartItems: state.cartItems.map(x => x.product === existItem.product ? {\n              ...x,\n              qty: updatedQty\n            } : x)\n          };\n        } else {\n          // 如果商品不存在于购物车中，则添加新商品\n          return {\n            ...state,\n            cartItems: [...state.cartItems, item]\n          };\n        }\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["CART_ADD_ITEM","CART_REMOVE_ITEM","cartReducer","state","cartItems","action","type","item","product","name","image","price","statetock","qty","fromProductPage","payload","existItem","find","x","updatedQty","map"],"sources":["/Users/risun/Desktop/podian/frontend/src/reducers/cartReducers.js"],"sourcesContent":["import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents'\n\n//购物车reducer\nexport const cartReducer = (state = { cartItems: [] }, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM: {\n      const {item, product, name, image, price, statetock, qty, fromProductPage} = action.payload;\n      \n      const existItem = state.cartItems.find(x => x.product === item.product);\n    \n      if (existItem) {\n        // 如果是从产品页面添加，则累加数量；否则，设置为特定的数量\n        const updatedQty = fromProductPage ? existItem.qty + item.qty : item.qty;\n        return {\n          ...state,\n          cartItems: state.cartItems.map(x =>\n            x.product === existItem.product ? { ...x, qty: updatedQty } : x\n          ),\n        };\n      } else {\n        // 如果商品不存在于购物车中，则添加新商品\n        return {\n          ...state,\n          cartItems: [...state.cartItems, item],\n        };\n      }\n    }\n    \n      \n    default:\n      return state\n  }\n}"],"mappings":"AAAA,SAASA,aAAa,EAAEC,gBAAgB,QAAQ,2BAA2B;;AAE3E;AACA,OAAO,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAG;EAAEC,SAAS,EAAE;AAAG,CAAC,EAAEC,MAAM,KAAK;EAChE,QAAQA,MAAM,CAACC,IAAI;IACjB;IACA,KAAKN,aAAa;MAAE;QAClB,MAAM;UAACO,IAAI;UAAEC,OAAO;UAAEC,IAAI;UAAEC,KAAK;UAAEC,KAAK;UAAEC,SAAS;UAAEC,GAAG;UAAEC;QAAe,CAAC,GAAGT,MAAM,CAACU,OAAO;QAE3F,MAAMC,SAAS,GAAGb,KAAK,CAACC,SAAS,CAACa,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACV,OAAO,KAAKD,IAAI,CAACC,OAAO,CAAC;QAEvE,IAAIQ,SAAS,EAAE;UACb;UACA,MAAMG,UAAU,GAAGL,eAAe,GAAGE,SAAS,CAACH,GAAG,GAAGN,IAAI,CAACM,GAAG,GAAGN,IAAI,CAACM,GAAG;UACxE,OAAO;YACL,GAAGV,KAAK;YACRC,SAAS,EAAED,KAAK,CAACC,SAAS,CAACgB,GAAG,CAACF,CAAC,IAC9BA,CAAC,CAACV,OAAO,KAAKQ,SAAS,CAACR,OAAO,GAAG;cAAE,GAAGU,CAAC;cAAEL,GAAG,EAAEM;YAAW,CAAC,GAAGD,CAChE;UACF,CAAC;QACH,CAAC,MAAM;UACL;UACA,OAAO;YACL,GAAGf,KAAK;YACRC,SAAS,EAAE,CAAC,GAAGD,KAAK,CAACC,SAAS,EAAEG,IAAI;UACtC,CAAC;QACH;MACF;IAGA;MACE,OAAOJ,KAAK;EAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}