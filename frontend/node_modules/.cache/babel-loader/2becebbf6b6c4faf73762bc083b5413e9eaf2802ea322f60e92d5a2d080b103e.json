{"ast":null,"code":"import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents';\n\n//购物车reducer\nexport const cartReducer = (state = {\n  cartItems: []\n}, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM:\n      {\n        const {\n          product,\n          name,\n          image,\n          price,\n          countInStock,\n          qty,\n          fromProductPage\n        } = action.payload;\n        const existItem = state.cartItems.find(x => x.product === product);\n        if (existItem) {\n          const updatedQty = fromProductPage ? existItem.qty + qty : qty;\n          return {\n            ...state,\n            cartItems: state.cartItems.map(x => x.product === product ? {\n              ...x,\n              qty: updatedQty\n            } : x)\n          };\n        } else {\n          return {\n            ...state,\n            cartItems: [...state.cartItems, action.payload]\n          };\n        }\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["CART_ADD_ITEM","CART_REMOVE_ITEM","cartReducer","state","cartItems","action","type","product","name","image","price","countInStock","qty","fromProductPage","payload","existItem","find","x","updatedQty","map"],"sources":["/Users/risun/Desktop/podian/frontend/src/reducers/cartReducers.js"],"sourcesContent":["import { CART_ADD_ITEM, CART_REMOVE_ITEM } from '../contents/cartConstents'\n\n//购物车reducer\nexport const cartReducer = (state = { cartItems: [] }, action) => {\n  switch (action.type) {\n    // 在cartReducer中\n    case CART_ADD_ITEM: {\n      const { product, name, image, price, countInStock, qty, fromProductPage } = action.payload;\n      const existItem = state.cartItems.find(x => x.product === product);\n    \n      if (existItem) {\n        const updatedQty = fromProductPage ? existItem.qty + qty : qty;\n        return {\n          ...state,\n          cartItems: state.cartItems.map(x =>\n            x.product === product ? { ...x, qty: updatedQty } : x\n          ),\n        };\n      } else {\n        return {\n          ...state,\n          cartItems: [...state.cartItems, action.payload],\n        };\n      }\n    }\n    \n      \n    default:\n      return state\n  }\n}"],"mappings":"AAAA,SAASA,aAAa,EAAEC,gBAAgB,QAAQ,2BAA2B;;AAE3E;AACA,OAAO,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAG;EAAEC,SAAS,EAAE;AAAG,CAAC,EAAEC,MAAM,KAAK;EAChE,QAAQA,MAAM,CAACC,IAAI;IACjB;IACA,KAAKN,aAAa;MAAE;QAClB,MAAM;UAAEO,OAAO;UAAEC,IAAI;UAAEC,KAAK;UAAEC,KAAK;UAAEC,YAAY;UAAEC,GAAG;UAAEC;QAAgB,CAAC,GAAGR,MAAM,CAACS,OAAO;QAC1F,MAAMC,SAAS,GAAGZ,KAAK,CAACC,SAAS,CAACY,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACV,OAAO,KAAKA,OAAO,CAAC;QAElE,IAAIQ,SAAS,EAAE;UACb,MAAMG,UAAU,GAAGL,eAAe,GAAGE,SAAS,CAACH,GAAG,GAAGA,GAAG,GAAGA,GAAG;UAC9D,OAAO;YACL,GAAGT,KAAK;YACRC,SAAS,EAAED,KAAK,CAACC,SAAS,CAACe,GAAG,CAACF,CAAC,IAC9BA,CAAC,CAACV,OAAO,KAAKA,OAAO,GAAG;cAAE,GAAGU,CAAC;cAAEL,GAAG,EAAEM;YAAW,CAAC,GAAGD,CACtD;UACF,CAAC;QACH,CAAC,MAAM;UACL,OAAO;YACL,GAAGd,KAAK;YACRC,SAAS,EAAE,CAAC,GAAGD,KAAK,CAACC,SAAS,EAAEC,MAAM,CAACS,OAAO;UAChD,CAAC;QACH;MACF;IAGA;MACE,OAAOX,KAAK;EAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}